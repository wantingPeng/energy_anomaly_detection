# Configuration file for Isolation Forest time series anomaly detection

# Paths
paths:
  output_dir: "experiments/isolation_forest"

# Data configuration
data:
  # Path to processed window features
  data_path: "Data/downsampleData_scratch_1minut/contact/contact_cleaned_1minut_20250928_172122.parquet"
  
  # Train/validation/test split ratios
  train_ratio: 0.7
  val_ratio: 0.15
  test_ratio: 0.15
  
  # Target column
  target_column: "anomaly_label"
  
  # Columns to exclude from features
  exclude_columns:
    - "TimeStamp"
    - "window_id"
    - "anomaly_label"
  
  # Standardize features
  standardize_features: true
  
  # Contamination (proportion of anomalies)
  # Set to null to estimate from target labels
  contamination: null
  
  # Whether to use target column to estimate contamination
  use_target_for_contamination: true

# Model configuration
model:
  # Number of trees in the forest
  n_estimators: 100
  
  # Number of samples to draw for each tree
  # "auto" uses min(256, n_samples)
  max_samples: "auto"
  
  # Contamination parameter (proportion of anomalies)
  # "auto" estimates from data or uses data.contamination if provided
  contamination: "auto"
  
  # Number of features to consider for best split
  # 1.0 means use all features
  max_features: 0.3
  
  # Whether to use bootstrap samples
  bootstrap: true
  
  # Number of parallel jobs
  # -1 means use all processors
  n_jobs: -1
  
  # Random state for reproducibility
  random_state: 42
  
  # Verbosity level
  verbose: 0

# Training configuration
training:
  # Whether to optimize decision threshold
  optimize_threshold: true
  
  # Metric to optimize threshold for
  # Options: f1, precision, recall
  threshold_metric: "f1"

# Evaluation configuration
evaluation:
  # Whether to use point adjustment
  use_point_adjustment: true
  
  # Whether to save predictions
  save_predictions: true
  
  # Whether to plot anomaly scores
  plot_anomaly_scores: true

# Feature importance
feature_importance:
  # Whether to save feature importance
  save_importance: true
  
  # Number of top features to plot
  plot_top_n: 30
